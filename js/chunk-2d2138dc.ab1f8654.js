(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2138dc"],{acbf:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("校级优秀毕业设计论文明细表")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"查询","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{lazy:"",persistent:"","max-width":"800px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},s),[e._v("添加")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"负责人",readonly:""},model:{value:e.editedItem.mainpeople,callback:function(t){e.$set(e.editedItem,"mainpeople",t)},expression:"editedItem.mainpeople"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{"persistent-hint":"",attach:"",items:e.departmentItems,label:"部门"},model:{value:e.editedItem.mpeopledepartment,callback:function(t){e.$set(e.editedItem,"mpeopledepartment",t)},expression:"editedItem.mpeopledepartment"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"论文名称",rules:e.formRules.papername,clearable:"",required:""},model:{value:e.editedItem.papername,callback:function(t){e.$set(e.editedItem,"papername",t)},expression:"editedItem.papername"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{ref:"studentid",attrs:{"persistent-hint":"",hint:"输入学号查询学生信息",label:"学生学号","append-outer-icon":"search",counter:"",maxlength:"12",rules:e.formRules.studentid,clearable:"",required:""},on:{"click:append-outer":function(t){return e.fetchStudentInfo(e.editedItem.studentid)}},model:{value:e.editedItem.studentid,callback:function(t){e.$set(e.editedItem,"studentid",t)},expression:"editedItem.studentid"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{items:e.departmentItems,attach:"",readonly:"",label:"学生院系"},model:{value:e.editedItem.studentdepartment,callback:function(t){e.$set(e.editedItem,"studentdepartment",t)},expression:"editedItem.studentdepartment"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"学生班级",readonly:""},model:{value:e.editedItem.studentclass,callback:function(t){e.$set(e.editedItem,"studentclass",t)},expression:"editedItem.studentclass"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"学生姓名",readonly:""},model:{value:e.editedItem.studentname,callback:function(t){e.$set(e.editedItem,"studentname",t)},expression:"editedItem.studentname"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{"menu-props":{maxHeight:"130"},items:e.rewordtypeItems,attach:"",rules:e.formRules.rewordtype,label:"奖项",required:""},model:{value:e.editedItem.rewordtype,callback:function(t){e.$set(e.editedItem,"rewordtype",t)},expression:"editedItem.rewordtype"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{"persistent-hint":"",hint:"点击查询得分",label:"总绩点",readonly:"","append-outer-icon":"send"},on:{"click:append-outer":function(t){return e.fetchPoint({type:"校级优秀毕业设计论文",grade:e.editedItem.rewordtype})}},model:{value:e.editedItem.point,callback:function(t){e.$set(e.editedItem,"point",t)},expression:"editedItem.point"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:e.reset}},[e._v("重置")]),a("v-btn",{attrs:{color:"error"},on:{click:e.close}},[e._v("取消")]),a("v-btn",{attrs:{disabled:!e.valid,color:"success"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,search:e.search,loading:e.loading,locale:"zh-CN"},scopedSlots:e._u([{key:"progress",fn:function(){return[a("v-progress-linear",{attrs:{color:"green",indeterminate:""}})]},proxy:!0},{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.index+1))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.mainpeople))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.mpeopledepartment))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.papername))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.studentdepartment))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.studentclass))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.studentid))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.studentname))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.rewordtype))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.point))]),a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(t.item)}}},[e._v("edit")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return e.deleteItem(t.item)}}},[e._v("delete")])],1)]}},{key:"pageText",fn:function(t){return[e._v("第 "+e._s(t.pageStart)+" 页 - 共 "+e._s(t.itemsLength)+" 行")]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("刷新")])]},proxy:!0},{key:"no-results",fn:function(){return[a("v-alert",{staticClass:"ma-2",attrs:{value:!0,color:"error",icon:"warning"}},[e._v('您查询的 "'+e._s(e.search)+'" 未找到相匹配的结果.')])]},proxy:!0}])})],1)],1)},n=[],i=(a("7f7f"),a("5176")),d=a.n(i),r=a("cebc"),l=a("2f62"),o={name:"StudentPaper",data:function(){return{valid:!0,dialog:!1,loading:!1,search:"",headers:[{text:"序号",align:"center",sortable:!1,value:"index",width:"1"},{text:"负责人",value:"mainpeople"},{text:"所属部门",value:"mpeopledepartment"},{text:"论文名称",value:"papername"},{text:"学生院系",value:"studentdepartment"},{text:"学生班级",value:"studentclass"},{text:"学生学号",value:"studentid"},{text:"学生姓名",value:"studentname"},{text:"奖项",value:"rewordtype"},{text:"总业绩点",value:"point"},{text:"操作",value:"index",sortable:!1}],desserts:[],editedIndex:-1,departmentItems:["软件学院","计算机学院"],rewordtypeItems:["一等奖","其他"],editedItem:{mainpeople:"",mpeopledepartment:"",papername:"",studentdepartment:"",studentclass:"",studentid:"",studentname:"",rewordtype:"",point:""},defaultItem:{mainpeople:"",mpeopledepartment:"",papername:"",studentdepartment:"",studentclass:"",studentid:"",studentname:"",rewordtype:"一等奖",point:""},formRules:{papername:[function(e){return!!e||"请填写论文名称！"}],studentid:[function(e){return!!e||"请填写学号！"},function(e){return/\d$/.test(e)||"有非法字符，学号必须为数字！"},function(e){return e&&12===e.length||"学号必须为12位！"}],rewordtype:[function(e){return!!e||"请选择奖项！"}]}}},computed:Object(r["a"])({},Object(l["b"])(["userInfo"]),{formTitle:function(){return-1===this.editedIndex?"添加":"修改"}}),watch:{dialog:function(e){var t=this;e&&-1===this.editedIndex&&this.$nextTick(function(e){t.reset()}),e||this.close()}},created:function(){this.initialize()},methods:{initialize:function(){for(var e=0;e<6;e++)this.desserts.push({mainpeople:"赵冬",mpeopledepartment:"软件学院",papername:"科研业绩量化",studentdepartment:"软件学院",studentclass:"RB软工卓越161",studentid:"201619150123",studentname:"丁魏武",rewordtype:"一等奖",point:0})},fetchStudentInfo:function(e){var t=this;this.$refs.studentid.validate()&&this.$api.user.getStudentInfoById(e).then(function(e){d()(t.editedItem,e.data)}).catch(function(e){console.error(e)})},fetchPoint:function(e){var t=this;this.$api.user.getPaperPoint(e).then(function(e){t.editedItem.point=e.data.point,console.log(e)}).catch(function(e){}),console.log(e)},editItem:function(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=d()({},e),this.dialog=!0},deleteItem:function(e){var t=this.desserts.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(t,1)},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.reset()},300)},save:function(){this.validate()&&(this.editedIndex>-1?d()(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close())},validate:function(){return this.$refs.form.validate()},reset:function(){this.editedItem=d()({},this.defaultItem),this.editedIndex=-1,this.resetValidation()},resetValidation:function(){this.$refs.form.resetValidation()}},beforeMount:function(){this.defaultItem.mainpeople=this.userInfo.name,this.defaultItem.mpeopledepartment=this.userInfo.department}},c=o,m=a("2877"),u=a("6544"),p=a.n(u),f=a("0798"),v=a("8336"),x=a("b0af"),h=a("99d9"),I=a("12b2"),b=a("a523"),_=a("8fea"),y=a("169a"),g=a("0e8f"),k=a("4bd4"),w=a("132d"),C=a("a722"),V=a("8e36"),$=a("b56d"),T=a("9910"),S=a("2677"),z=a("71d9"),P=a("2a7f"),O=Object(m["a"])(c,s,n,!1,null,null,null);t["default"]=O.exports;p()(O,{VAlert:f["a"],VBtn:v["a"],VCard:x["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:I["a"],VContainer:b["a"],VDataTable:_["a"],VDialog:y["a"],VFlex:g["a"],VForm:k["a"],VIcon:w["a"],VLayout:C["a"],VProgressLinear:V["a"],VSelect:$["a"],VSpacer:T["a"],VTextField:S["a"],VToolbar:z["a"],VToolbarTitle:P["b"]})}}]);
//# sourceMappingURL=chunk-2d2138dc.ab1f8654.js.map